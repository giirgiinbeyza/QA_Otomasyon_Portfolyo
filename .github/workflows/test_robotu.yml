name: Hepsiburada Otomasyon Robotu ğŸ¤–

on:
  push:
    branches: [ "main" ]

jobs:
  test_yap:
    runs-on: ubuntu-latest

    steps:
    # 1. KodlarÄ± Ä°ndir
    - name: Depoyu Kontrol Et (Checkout)
      uses: actions/checkout@v3

    # 2. Python Kur
    - name: Python Kurulumu
      uses: actions/setup-python@v4
      with:
        python-version: "3.10"

    # 3. KÃ¼tÃ¼phaneleri YÃ¼kle
    - name: Gereklilikleri YÃ¼kle
      run: |
        python -m pip install --upgrade pip
        pip install requests locust

    # 4. Testi BaÅŸlat (Locust Sessiz Mod) ğŸš€
    # --headless: ArayÃ¼z aÃ§ma demek
    # -u 10: 10 KullanÄ±cÄ± ile
    # -t 10s: 10 saniye boyunca test et
    - name: Performans Testini BaÅŸlat
      run: locust -f advanced_test.py --headless -u 10 -r 2 -t 10s